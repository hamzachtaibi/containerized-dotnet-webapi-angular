<!-- Page Title -->
<div class="pagetitle">
    <h1>{{title}}</h1>
</div><!-- End Page Title -->

<app-not-found *ngIf="showNotFound" [title]="bigTitle" [indication]="indications" [showButton]="showButton"></app-not-found>

<section *ngIf="!showNotFound" class="section profile">
    <div class="row">
        <!-- Left Section -->
        <div class="col-xl-4">

            <div class="card">
                <div class="card-body profile-card pt-4 d-flex flex-column align-items-center">

                    <img src="{{needyProfileData.imageProfile}}" class="rounded-circle">
                    <h2>{{needyProfileData.fullNameArabic}}</h2>
                </div>
            </div>
        </div>

        <!-- Right Section -->
        <div class="col-xl-8">

            <div class="card">
                <!-- Buttons Delete & Modify -->
                <div class="d-flex justify-content-end">
                    <div class="m-2"><a class="btn btn-outline-danger btn-sm" (click)='DeleteProfile()'><i class="bi bi-person-x-fill"></i> Supprimer le profil</a></div>
                    <div class="m-2"><a class="btn btn-outline-success btn-sm" routerLink="/dashboard/profile/edit/{{needyProfileData.id}}"><i class="bi bi-pencil-square"></i> Modifier le profil</a></div>

                </div>

                <div class="card-body pt-3">
                    <!-- Bordered Tabs -->
                    <ul class="nav nav-tabs nav-tabs-bordered">
                        <!-- Tab Overview -->
                        <li class="nav-item">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile-overview">Vue générale</button>
                        </li>
                        <!-- Tab Setting  -->
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-settings">Réglages</button>
                        </li>

                    </ul>
                    <!-- Tabs Content -->
                    <div class="tab-content pt-2">
                        <!-- Tab 1 : Content Overview -->
                        <div class="tab-pane fade show active profile-overview" id="profile-overview">
                            <!-- Content Arbic -->
                            <div dir="rtl">
                                <fieldset class="scheduler-border">
                                    <h4 class="card-title-wna">ملاحظة</h4>
                                    <hr />
                                    <p class="small fst-normal fs-6">{{needyProfileData.noteArabic}}</p>
                                </fieldset>

                                <fieldset class="scheduler-border">
                                    <h4 class="card-title-wna">معلومات شخصية</h4>
                                    <hr />
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label ">الاسم الكامل</div>
                                        <div class="col-lg-9 col-md-8">{{needyProfileData.fullNameArabic}} - {{needyProfileData.fullName}}</div>
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">الرقم التعريفي</div>
                                        <div class="col-lg-9 col-md-8">{{needyProfileData.cin}}</div>
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">رقم الهاتف</div>
                                        <div class="col-lg-9 col-md-8">{{needyProfileData.phoneNumber}}</div>
                                    </div>


                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">البريد الإلكتروني</div>
                                        <div class="col-lg-9 col-md-8">{{needyProfileData.email}}</div>
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">تاريخ الإزدياد</div>
                                        <div class="col-lg-9 col-md-8">{{birthDate}}</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">الجنس</div>
                                        <div class="col-lg-9 col-md-8">{{gender}}</div>
                                    </div>

                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">مكان الولادة</div>
                                        <div class="col-lg-9 col-md-8">{{needyProfileData.birthPlaceArabic}} - {{needyProfileData.birthPlace}}</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">العنوان</div>
                                        <div class="col-lg-9 col-md-8">
                                            <p>{{needyProfileData.addressArabic}} {{needyProfileData.cityArabic}}<br /> {{needyProfileData.countryArabic}} {{needyProfileData.postalCode}}</p>
                                            <p class="text-right">{{needyProfileData.address}} {{needyProfileData.city}}<br /> {{needyProfileData.country}} {{needyProfileData.postalCode}}</p>
                                        </div>
                                    </div>
                                </fieldset>

                                <fieldset class="scheduler-border">
                                    <h4 class="card-title-wna">التعليم و الوظيفة</h4>
                                    <hr />
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">المستوى التعليمي</div>
                                        <div class="col-lg-9 col-md-8">{{needyProfileData.academicLevelArabic}} - {{needyProfileData.academicLevel}}</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">العمل</div>
                                        <div class="col-lg-9 col-md-8">{{needyProfileData.professionArabic}} - {{needyProfileData.profession}}</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">الحلم</div>
                                        <div class="col-lg-9 col-md-8">{{needyProfileData.dreamOfArabic}} - {{needyProfileData.dreamOf}}</div>
                                    </div>
                                </fieldset>

                                <fieldset class="scheduler-border">
                                    <h4 class="card-title-wna">الحالة المدنية</h4>
                                    <hr />
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">رقم سجل الأسرة</div>
                                        <div class="col-lg-9 col-md-8">{{needyProfileData.familyRecordNumber}}</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">الحالة المدنية</div>
                                        <div class="col-lg-9 col-md-8">{{needyProfileData.maritalStatus}}</div>
                                    </div>
                                </fieldset>

                                <fieldset class="scheduler-border">
                                    <h4 class="card-title-wna">معلومات عائلية</h4>
                                    <hr />
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">الرقم التعريفي للأب</div>
                                        <div class="col-lg-9 col-md-8">{{needyProfileData.fatherId}}</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">الرقم التعريفي للأم</div>
                                        <div class="col-lg-9 col-md-8">{{needyProfileData.motherId}}</div>
                                    </div>
                                </fieldset>

                                <fieldset class="scheduler-border">
                                    <h4 class="card-title-wna">تواريخ الملف</h4>
                                    <hr />
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">تاريخ التسجيل</div>
                                        <div class="col-lg-9 col-md-8">{{registrationDate}}</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-3 col-md-4 label">آخر تحديث</div>
                                        <div class="col-lg-9 col-md-8">{{profileUpdateTime}}</div>
                                    </div>
                                </fieldset>
                            </div>


                        </div>

                        <div class="tab-pane fade pt-3" id="profile-settings">

                            <!-- Settings Form -->
                            <form [formGroup]="settingsForm" (ngSubmit)="UpdateProfileSettings()">
                                <div class="row mb-3">
                                    <label for="fullName" class="col-md-4 col-lg-3 col-form-label">Statut du profil</label>
                                    <div class="col-md-8 col-lg-9 mt-2">
                                        <div class="form-check form-switch">
                                            <input type="checkbox" formControlName="isActive" class="form-check-input" role="switch" id="{{needyProfileData.id}}" [checked]="needyProfileData.isActive">
                                            <label class="form-check-label" for="{{needyProfileData.id}}">
                                                Active (<i class="bi bi-info-circle" data-bs-toggle="tooltip" data-bs-placement="top" title="Activez/Désactivez ce profil pour qu'il soit disponible ou non disponible lors de la création d'une campagne."></i>)
                                            </label>

                                        </div>
                                    </div>
                                </div>

                                <div class="text-end">
                                    <div class="m-2"><button class="btn btn-primary btn-sm">Sauvegarder</button></div>
                                </div>
                            </form><!-- End settings Form -->
                        </div>
                    </div><!-- End Bordered Tabs -->

                </div>
            </div>

        </div>
    </div>
</section>


