<!-- Page Title -->
<div class="pagetitle">
    <h1>{{title}}</h1>
</div><!-- End Page Title -->

<section class="section profile">
    <div class="row">
        <!-- Left Section -->
        <div class="col-xl-4">

            <div class="card">
                <div class="card-body profile-card pt-4 d-flex flex-column align-items-center">
                    <img src="{{userProfileData.imageProfile}}" alt="Profile" class="rounded-circle">
                    <h2>{{userProfileData.fullName}}</h2>
                    <h3>{{userProfileData.profession}}</h3>
                    <div class="social-links mt-2">
                        <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
                        <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
                        <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
                    </div>
                </div>
            </div>

        </div>

        <!-- Right Section -->
        <div class="col-xl-8">

            <div class="card">
                <div class="card-body pt-3">
                    <!-- Bordered Tabs -->
                    <ul class="nav nav-tabs nav-tabs-bordered">
                        <!-- Tab Overview -->
                        <li class="nav-item">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile-overview">Vue
                                générale</button>
                        </li>
                        <!-- Tab Edit Profile -->
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-edit">Editer le
                                profil</button>
                        </li>
                        <!-- Tab Setting  -->
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab"
                                data-bs-target="#profile-settings">Réglages</button>
                        </li>
                        <!-- Tab Change password-->
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab"
                                data-bs-target="#profile-change-password">Changer le mot de passe</button>
                        </li>

                    </ul>
                    <div class="tab-content pt-2">
                        <!-- Content Overview -->
                        <div class="tab-pane fade show active profile-overview" id="profile-overview">

                            <h5 class="card-title">Détails du profil</h5>

                            <div class="row">
                                <div class="col-lg-3 col-md-4 label ">Nom et prénom</div>
                                <div class="col-lg-9 col-md-8">{{userProfileData.fullName}}</div>
                            </div>

                            <div class="row">
                                <div class="col-lg-3 col-md-4 label">Profession</div>
                                <div class="col-lg-9 col-md-8">{{userProfileData.profession}}</div>
                            </div>

                            <div class="row">
                                <div class="col-lg-3 col-md-4 label">E-mail</div>
                                <div class="col-lg-9 col-md-8">{{userProfileData.email}}</div>
                            </div>

                            <div class="row">
                                <div class="col-lg-3 col-md-4 label">Téléphone</div>
                                <div class="col-lg-9 col-md-8">{{userProfileData.phoneNumber}}</div>
                            </div>

                            <div class="row">
                                <div class="col-lg-3 col-md-4 label">Adresse</div>
                                <div class="col-lg-9 col-md-8">{{userProfileData.address}}</div>
                            </div>
                            <div class="row">
                                <div class="col-lg-3 col-md-4 label">CIN</div>
                                <div class="col-lg-9 col-md-8">{{userProfileData.cin}}</div>
                            </div>

                            <div class="row">
                                <div class="col-lg-3 col-md-4 label">Date de naissance</div>
                                <div class="col-lg-9 col-md-8">{{birthDate}}</div>
                            </div>

                            <div class="row">
                                <div class="col-lg-3 col-md-4 label">Dernières mises à jour</div>
                                <div class="col-lg-9 col-md-8">{{profileUpdateTime}}</div>
                            </div>
                            <div class="row">
                                <div class="col-lg-3 col-md-4 label">profil créé :</div>
                                <div class="col-lg-9 col-md-8">{{registrationDate}}</div>
                            </div>


                        </div>

                        <div class="tab-pane fade profile-edit pt-3" id="profile-edit">
                            <!-- Profile Edit Form -->
                            <app-add-member [isChild]="true" [isActive]="userProfileData.isActive!" [userProfileId] = "payLoadToken.profileId!"></app-add-member>
                            <!-- End Profile Edit Form -->
                        </div>

                        <div class="tab-pane fade pt-3" id="profile-settings">

                            <!-- Manage account -->
                            <div class="row mb-3">
                                <div class="col-md-8 col-lg-9 mt-2">
                                    <div class="d-sm-flex align-items-center pt-3" id="deactivate">
                                        <div>
                                            <b>Désactiver votre compte</b>
                                            <p style="color:firebrick">Attention ! Si vous désactivez votre compte, vous ne pourrez plus l'activer.
                                                Seuls les membres de l'administration le peuvent.<br>
                                                Vous serez immédiatement déconnecté.
                                        </p>
                                        </div>
                                        <div class="m-4">
                                            <button class="btn btn-outline-danger btn-sm" (click)="UpdateStatus()"> Désactiver </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-pane fade pt-3" id="profile-change-password">
                            <!-- Change Password Form -->
                            <form [formGroup]="updatePasswordForm" (ngSubmit)="onChangePassword()">

                                <div class="row mb-3">
                                    <label for="email" class="col-md-4 col-lg-3 col-form-label">Adresse e-mail</label>
                                    <div class="col-md-8 col-lg-9">
                                        <input type="email" formControlName="email" class="form-control"
                                            placeholder="example@mail.com">
                                        <!--Validation Message-->
                                        <small class="text-danger"
                                            *ngIf="updatePasswordForm.get('email')?.dirty && updatePasswordForm.get('email')?.errors?.['required']">*
                                            Adresse e-mail est nécessaire</small>
                                        <small class="text-danger"
                                            *ngIf="updatePasswordForm.get('email')?.errors?.['isValidEmail'] && updatePasswordForm.get('email')?.value?.length >0 ">*
                                            Pas un e-mail valide</small>

                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <label for="oldPassword" class="col-md-4 col-lg-3 col-form-label">Password actuel</label>
                                    <div class="col-md-8 col-lg-9">
                                        <input type="oldPassword" formControlName="oldPassword" class="form-control"
                                            placeholder="*********">
                                        <!--Validation Message-->
                                        <small class="text-danger"
                                            *ngIf="updatePasswordForm.get('password')?.dirty && updatePasswordForm.get('password')?.errors?.['required']">*
                                            Ancien mot de passe requis</small>

                                    </div>
                                </div>

                                <div class="row mb-3">
                                    <label for="newPassword" class="col-md-4 col-lg-3 col-form-label">Nouveau Password</label>
                                    <div class="col-md-8 col-lg-9">
                                        <input type="newPassword" formControlName="newPassword" class="form-control"
                                            placeholder="*********">
                                        <!--Validation Message-->
                                        <small class="text-danger"
                                            *ngIf="updatePasswordForm.get('password')?.dirty && updatePasswordForm.get('password')?.errors?.['required']">*
                                            Nouveau Password</small>

                                    </div>
                                </div>

                                <div class="text-center">
                                    <button class="btn btn-primary">Changer</button>
                                </div>
                            </form><!-- End Change Email Form -->

                        </div>
                    </div><!-- End Bordered Tabs -->

                </div>
            </div>

        </div>
    </div>
</section>